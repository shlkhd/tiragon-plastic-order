
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Order Form</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <img src="logo.png" alt="Tiragon Logo" style="max-width: 200px; display: block; margin: auto; margin-top: 20px;" />

    <h2 id="form-title">Product Order</h2>
    <form action="/submit" method="POST" enctype="multipart/form-data" id="order-form">
      <label for="language">Language:</label>
      <select id="language" onchange="setLanguage()">
        <option value="en">English</option>
        <option value="fa">فارسی</option>
        <option value="ar">العربية</option>
        <option value="zh">中文</option>
        <option value="hi">हिंदी</option>
      </select>

      <label for="name" id="label-name">Name</label>
      <input type="text" name="name" required />

      <label for="phone" id="label-phone">Phone</label>
      <input type="text" name="phone" required />

      <label for="country" id="label-country">Country</label>
      <input type="text" name="country" required />

      <div id="product-section">
        <div class="product-entry">
          <label id="label-product">Product</label>
          <select name="product" required id="product-select"></select>

          <label id="label-weight">Weight</label>
          <input type="text" name="weight" required />

          <label id="label-description">Description</label>
          <input type="text" name="description" />
        </div>
      </div>

      <button type="button" onclick="addProduct()">➕ Add Product</button>
      <button type="submit" id="submit-btn">Submit</button>
    </form>

    <a id="whatsapp-link" target="_blank" style="display:block; margin-top:20px; text-align:center; font-weight:bold; color:#25D366;">
      📱 Contact us on WhatsApp
    </a>
  </div>

  <script>
    async function setLanguage() {
      const lang = document.getElementById("language").value;
      const res = await fetch("lang/" + lang + ".json");
      const data = await res.json();
      document.getElementById("form-title").innerText = data["form_title"];
      document.getElementById("label-name").innerText = data["name"];
      document.getElementById("label-phone").innerText = data["phone"];
      document.getElementById("label-country").innerText = data["country"];
      document.getElementById("label-product").innerText = data["product"];
      document.getElementById("label-weight").innerText = data["weight"];
      document.getElementById("label-description").innerText = data["description"];
      document.getElementById("submit-btn").innerText = data["submit"];
      fillProductOptions(data["products"]);
      updateWhatsAppLink();
    }

    function fillProductOptions(products) {
      document.getElementById("product-select").innerHTML = "";
      for (const item of products) {
        const opt = document.createElement("option");
        opt.value = item;
        opt.textContent = item;
        document.getElementById("product-select").appendChild(opt);
      }
    }

    function addProduct() {
      const div = document.createElement("div");
      div.className = "product-entry";
      div.innerHTML = document.querySelector(".product-entry").innerHTML;
      document.getElementById("product-section").appendChild(div);
    }

    function updateWhatsAppLink() {
      const lang = document.getElementById("language").value;
      const messages = {
        fa: "سلام، می‌خواهم سفارشی ثبت کنم.",
        en: "Hello, I want to place an order.",
        ar: "مرحبًا، أريد تقديم طلب.",
        zh: "你好，我想下订单。",
        hi: "नमस्ते, मैं ऑर्डर देना चाहता हूँ।"
      };
      const msg = encodeURIComponent(messages[lang] || messages.en);
      document.getElementById("whatsapp-link").href = "https://wa.me/971557068949?text=" + msg;
    }

    window.onload = setLanguage;
  </script>
</body>
</html>
